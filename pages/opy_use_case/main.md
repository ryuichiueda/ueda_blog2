---
Copyright: (C) Ryuichi Ueda
---

# opyの便利な使い方集

## opyって何？

opyは、ワンライナーでPythonを使うためのラッパーコマンドです。

* [インストールはこちらから](https://github.com/ryuichiueda/opy)

## 電卓として使う

　`eval`で文字列を評価するとできます。

```
$ echo '2**10' | opy '[eval(F0)]'
1024
$ echo 'math.cos(math.pi)' | opy '[eval(F0)]'
-1.0
```

若干補足すると、`F0`には、毎行読み込んだ文字列が入ります。`[ ]`はPythonのリストで、リストの中に処理を書いておくと、上の例のように処理結果がprintされます。

## 基数変換（n進数→m進数）

### n進数→10進数

　接頭辞がついていれば、内部で自動的に整数に変換され、`print`すると10進数で表示されます。

```
$ echo 0b11 | opy '[F1]'
3
$ echo 0o10 | opy '[F1]'
8
$ echo 0x10 | opy '[F1]'
16
```

補足: `F1`は読み込んだ行の1列目の文字列が入ります。文字列が数字として解釈できる場合、自動的に数字に変換されます。

　接頭語がなければ、つけてから処理しましょう。（`sed`でやるべきですが。）

```
$ echo aaaaaaaaaa | opy '["0x"+F1]' | opy '[F1]'
733007751850
```

### 10進数→n進数

```
$ echo 16 | opy '[bin(F1)]'
0b10000
$ echo 16 | opy '[oct(F1)]'
0o20
$ echo 16 | opy '[hex(F1)]'
0x10
```

### n進数→m進数


上のふたつのパターンの組み合わせです。

```
$ echo 0x10 | opy '[oct(F1)]'
0o20
```
